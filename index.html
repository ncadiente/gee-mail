<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        function printEmail(email){
        	var emailBox=document.createElement('div');
                emailBox.className="email";
        	var dateBox=document.createElement('div');
        		dateBox.innerHTML=email.date;
                dateBox.className="date";
                emailBox.appendChild(dateBox);
        	var subjectBox=document.createElement('div');
        		subjectBox.innerHTML=email.subject;
                subjectBox.className="subject";
                emailBox.appendChild(subjectBox);
        	var senderBox=document.createElement('div');
        		senderBox.innerHTML=email.sender;
                senderBox.className="sender";
                emailBox.appendChild(senderBox);
        	var bodyBox=document.createElement('div');
        		bodyBox.innerHTML=email.body;
                bodyBox.className="body";
                emailBox.appendChild(bodyBox);
            var newLine=document.createElement("br");
                emailBox.appendChild(newLine);
            document.getElementById("main").appendChild(emailBox);
            emailBox.addEventListener("click",function() {
                if (bodyBox.style.display==="none"){
                bodyBox.style.display="block";
            }else{
                bodyBox.style.display="none"
            }
            })
        }

        for (var i=0; i<window.geemails.length; i++){
     	printEmail(window.geemails[i]);
        };
        
        var emailCount=(window.geemails.length);
        var header=document.getElementById("myHeader");
        header.innerHTML=emailCount;
        var newEmails= document.createElement("span");
        newEmails.innerHTML= " New Emails";
        header.appendChild(newEmails);

        function addMessage(email){
            var emailBox=document.createElement('div');
                emailBox.className="email";
            var dateBox=document.createElement('div');
                dateBox.innerHTML=email.date;
                dateBox.className="date";
                emailBox.appendChild(dateBox);
            var subjectBox=document.createElement('div');
                subjectBox.innerHTML=email.subject;
                subjectBox.className="subject";
                emailBox.appendChild(subjectBox);
            var senderBox=document.createElement('div');
                senderBox.innerHTML=email.sender;
                senderBox.className="sender";
                emailBox.appendChild(senderBox);
            var bodyBox=document.createElement('div');
                bodyBox.innerHTML=email.body;
                bodyBox.className="body";
                emailBox.appendChild(bodyBox);
            var newLine=document.createElement("br");
                emailBox.appendChild(newLine);
            document.getElementById("main").insertBefore(emailBox, document.getElementById("main").childNodes[0]);
            emailBox.addEventListener("click",function() {
                if (bodyBox.style.display==="none"){
                bodyBox.style.display="block";
            }else{
                bodyBox.style.display="none"
            }
            })
            

        }
        
        setInterval(function(){
            addMessage(getNewMessage());
            emailCount +=1;

        }, 10000);

        
        
      };
    </script>
	</head>
	<body>
    <header id="myHeader">

    </header>
		<div class="container" id="main">
			<!--Build Me!-->
		</div>
	</body>
</html>